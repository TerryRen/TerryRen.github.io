<!DOCTYPE html>
<html><head>
<title>亿级订单系统：电商C端与B端分库分表架构终极指南</title>




<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="G-ZE2B25M3ST">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="description" content="深度剖析电商C端与B端数据库架构的本质区别。从热点博弈、并发模型到成本演进，助你设计真正健壮、可扩展的亿级订单系统。">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">



<meta property="og:title" content="亿级订单系统：电商C端与B端分库分表架构终极指南" />
<meta property="og:description" content="深度剖析电商C端与B端数据库架构的本质区别。从热点博弈、并发模型到成本演进，助你设计真正健壮、可扩展的亿级订单系统。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://terryren.github.io/posts/architect/misc/mysql-sharding-compare/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2025-07-29T10:00:00+08:00" />
<meta property="article:modified_time" content="2025-07-29T10:00:00+08:00" /><meta property="og:site_name" content="My Blog" />





<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="亿级订单系统：电商C端与B端分库分表架构终极指南"/>
<meta name="twitter:description" content="深度剖析电商C端与B端数据库架构的本质区别。从热点博弈、并发模型到成本演进，助你设计真正健壮、可扩展的亿级订单系统。"/>







<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZE2B25M3ST"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-ZE2B25M3ST', { 'anonymize_ip': false });
}
</script>







  






      <script src="/js/toc.js"></script>
    
    <link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">

<link rel="stylesheet" href="/scss/dark-mode.min.cb53f1bee2b8900cb4f082afbf00175d6618f281cf9a2fe8619e3b52d20b5721.css" integrity="sha256-y1PxvuK4kAy08IKvvwAXXWYY8oHPmi/oYZ47UtILVyE=" media="screen">


<link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Material+Icons">








<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="/vendor/js/md5.min.js"></script><script>
  var gitalk = new Gitalk({
  clientID: '50258117d196aaac7365',
  clientSecret: '0275b94a9ffbee8946d8bd5a18dac9232057164a',
  repo: 'TerryRen.github.io',
  owner: 'TerryRen',
  admin: ['TerryRen'],
  id: md5(location.pathname),
  distractionFreeMode: 'false'
  });
  window.onload = function () {
        gitalk.render('gitalk-container')
  }
</script>











<script>console.log("Hello from 'layouts/partials/extended_head.html'")</script>

</head>
<body>
    	<div id="app"><div class="single-column-drawer-container" id="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
            
                
                
                
                    
                
                
                
                <a class="a-block drawer-menu-item active" href="/posts">
                    博客
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/categories">
                    分类
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/tags">
                    标签
                </a>
                
            
                
                
                
                
                
                <a class="a-block drawer-menu-item false" href="/index.xml">
                    订阅
                </a>
                
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- 目录 -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e6%a0%b8%e5%bf%83%e5%8e%9f%e5%88%99c-%e7%ab%af%e4%b8%8e-b-%e7%ab%af%e5%bf%85%e9%a1%bb%e5%88%86%e8%80%8c%e6%b2%bb%e4%b9%8b" class="nav-核心原则c-端与-b-端必须分而治之">
									核心原则：C 端与 B 端，必须“分而治之”
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#c-%e7%ab%af%e6%9e%b6%e6%9e%84%e8%bf%bd%e6%b1%82%e6%9e%81%e8%87%b4%e7%9a%84%e5%b9%b6%e5%8f%91%e4%b8%8e%e7%a8%b3%e5%ae%9a%e7%9a%84%e4%bd%93%e9%aa%8c" class="nav-c-端架构追求极致的并发与稳定的体验">
									C 端架构：追求极致的并发与稳定的体验
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5uid-%e5%88%86%e5%ba%93--hothistory-%e8%a1%a8-%e6%88%96-%e6%9c%88%e5%88%86%e8%a1%a8" class="nav-最佳实践uid-分库--hothistory-表-或-月分表">
									最佳实践：UID 分库 &#43; hot/history 表 (或 月分表)
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e6%b7%b1%e5%ba%a6%e8%a7%a3%e6%9e%90%e4%b8%ba%e4%bd%95%e5%ae%83%e8%83%bd%e5%ba%94%e5%af%b9%e6%9e%81%e9%99%90%e5%b9%b6%e5%8f%91" class="nav-深度解析为何它能应对极限并发">
									深度解析：为何它能应对极限并发？
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e5%8d%b1%e9%99%a9%e7%9a%84%e5%8f%8d%e6%a8%a1%e5%bc%8fuid-%e5%88%86%e5%ba%93--uid-hash-%e5%88%86%e8%a1%a8" class="nav-危险的反模式uid-分库--uid-hash-分表">
									危险的反模式：UID 分库 &#43; UID Hash 分表
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#b-%e7%ab%af%e6%9e%b6%e6%9e%84%e6%8b%a5%e6%8a%b1%e6%95%b0%e6%8d%ae%e5%80%be%e6%96%9c%e8%b5%8b%e8%83%bd%e5%95%86%e4%b8%9a%e5%88%86%e6%9e%90" class="nav-b-端架构拥抱数据倾斜赋能商业分析">
									B 端架构：拥抱数据倾斜，赋能商业分析
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e9%bb%84%e9%87%91%e7%bb%84%e5%90%88mysql-%e5%ae%9e%e6%97%b6%e5%ba%93--olap-%e5%88%86%e6%9e%90%e5%ba%93" class="nav-黄金组合mysql-实时库--olap-分析库">
									黄金组合：MySQL 实时库 &#43; OLAP 分析库
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%a0%b8%e5%bf%83%e9%9a%be%e9%a2%98%e5%a6%82%e4%bd%95%e4%bc%98%e9%9b%85%e5%9c%b0%e5%a4%84%e7%90%86%e8%b6%85%e7%ba%a7%e5%8d%96%e5%ae%b6" class="nav-核心难题如何优雅地处理超级卖家">
									核心难题：如何优雅地处理“超级卖家”？
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e7%bb%88%e6%9e%81%e6%96%b9%e6%a1%88%e7%89%a9%e7%90%86%e9%9a%94%e7%a6%bb%e5%bb%ba%e7%ab%8b%e4%b8%93%e5%b1%9e%e6%95%b0%e6%8d%ae%e5%ba%93" class="nav-终极方案物理隔离建立专属数据库">
									终极方案：物理隔离，建立“专属数据库”
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e4%b8%93%e5%b1%9e%e5%ba%93%e5%86%85%e9%83%a8%e7%9a%84%e5%88%86%e8%a1%a8%e7%ad%96%e7%95%a5%e5%9b%9e%e5%bd%92%e6%97%b6%e9%97%b4" class="nav-专属库内部的分表策略回归时间">
									专属库内部的分表策略：回归时间
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#b%e7%ab%af%e6%9e%b6%e6%9e%84%e7%9a%84%e5%a4%9a%e5%b1%82%e9%98%b2%e5%be%a1%e4%bd%93%e7%b3%bb%e6%80%bb%e7%bb%93" class="nav-b端架构的多层防御体系总结">
									B端架构的多层防御体系总结
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e6%bc%94%e8%bf%9b%e8%b7%af%e7%ba%bf%e4%b8%8e%e6%80%bb%e7%bb%93" class="nav-演进路线与总结">
									演进路线与总结
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div id="drawer-mask" v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav id="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div id="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a id="navTitle" class="navbar-brand" href="https://terryren.github.io/">
            The Sound of Music
        </a>
        
        <button type="button" class="nav-darkmode-toggle" id="darkModeToggleButton2">
            <i class="material-icons" id="darkModeToggleIcon2">
                dark_mode
            </i>
        </button>
        
    </div>
</nav>
<div class="single-column-header-container" id="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="https://terryren.github.io/">
        <div class="single-column-header-title">The Sound of Music</div>
        
        <div class="single-column-header-subtitle">知行合一</div>
        

    </a>
</div>

            <div id="content">
                <div id="streamContainer" class="stream-container">

    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            

            <div class="post-head-wrapper-text-only"
                
            >
                <div class="post-title">
                    亿级订单系统：电商C端与B端分库分表架构终极指南
                    
                    <div class="post-subtitle">
                        深度剖析电商C端与B端数据库架构的本质区别。从热点博弈、并发模型到成本演进，助你设计真正健壮、可扩展的亿级订单系统。
                    </div>
                    
                    <div class="post-meta">
                        
                        <time itemprop="datePublished">
                            2025-07-29 10:00
                        </time>
                        

                        
                            <i class="material-icons" style="">folder</i>
                                <a href="/categories/architecture">Architecture</a>
                                &nbsp;
                        

                        
                            <i class="material-icons" style="">label</i>
                            
                                <a href="/tags/database">Database</a>
                                &nbsp;
                            
                                <a href="/tags/sharding">Sharding</a>
                                &nbsp;
                            
                                <a href="/tags/architecture">Architecture</a>
                                &nbsp;
                            
                                <a href="/tags/mysql">MySQL</a>
                                &nbsp;
                            
                                <a href="/tags/%E9%AB%98%E5%B9%B6%E5%8F%91">高并发</a>
                                &nbsp;
                            
                        
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                
                <div class="post-body" v-pre>
                
                    <blockquote>
<p>当日订单量从百万冲向一亿，数据库架构的挑战不再是简单的“要不要分库分表”，而是如何为特征迥异的 C 端（用户）和 B 端（商户）设计出各自最优、且能协同工作的“专属”架构。本文将彻底摒弃泛泛而谈的方案罗列，直击问题本质，深度剖析两种业务场景下的最佳实践与反模式。</p>
</blockquote>
<h2 id="核心原则c-端与-b-端必须分而治之">核心原则：C 端与 B 端，必须“分而治之”</h2>
<p>电商系统的数据库设计，最大的误区就是试图用一套统一的方案解决所有问题。C 端和 B 端的业务特征差异巨大，决定了它们必须采用不同的架构策略。</p>
<ul>
<li><strong>C 端 (Customer)</strong>：用户量巨大，但个体行为相对均匀。核心诉求是<strong>高并发下的快速读写</strong>和<strong>个人关联数据的聚合</strong>。不存在“超级用户”能凭一己之力压垮整个系统。</li>
<li><strong>B 端 (Business)</strong>：商户规模天差地别，“超级卖家”现象普遍存在。核心诉求是<strong>应对数据倾斜（热点）</strong>、<strong>复杂的报表分析</strong>和<strong>严格的数据隔离</strong>。</li>
</ul>
<h2 id="c-端架构追求极致的并发与稳定的体验">C 端架构：追求极致的并发与稳定的体验</h2>
<p>对于 C 端，我们的目标是：在亿级用户和千万级 TPS 的冲击下，保证每个普通用户的下单、查询等操作都如丝般顺滑。</p>
<h3 id="最佳实践uid-分库--hothistory-表-或-月分表">最佳实践：<code>UID 分库 + hot/history 表</code> (或 <code>月分表</code>)</h3>
<p>这是业界公认的最成熟、最稳健的 C 端订单架构。</p>
<ul>
<li><strong>分库</strong>：<code>库 = uid % N</code> (例如 N=256)。将一个用户的所有数据（订单、地址等）路由到同一个物理数据库。</li>
<li><strong>分表</strong>：库内创建 <code>orders_hot</code> 和 <code>orders_history</code> 两张表。新订单写入 <code>hot</code> 表，后台任务定期将超过（如90天）的冷数据迁移到 <code>history</code> 表。<code>月分表</code> (如 <code>orders_202407</code>) 是此模式的变体，原理相通。</li>
</ul>
<h4 id="深度解析为何它能应对极限并发">深度解析：为何它能应对极限并发？</h4>
<p>这里的核心是<strong>写操作的冲突域管理</strong>。</p>
<table>
<thead>
<tr>
<th>维度</th>
<th>写并发分析</th>
<th>结论</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>写入目标</strong></td>
<td>写入请求根据 <code>uid</code> 均分到 256 个库，每个库平均承载的 TPS 远低于其物理极限（单库可达 2000-5000 TPS）。</td>
<td><strong>宏观层面高度分散，无瓶颈。</strong></td>
</tr>
<tr>
<td><strong>热点用户冲击</strong></td>
<td>假设一个热点用户（如公司订餐）并发 100 个 <code>INSERT</code>，这些请求会落到同一个库的 <code>hot</code> 表。</td>
<td></td>
</tr>
<tr>
<td><strong>冲突点</strong></td>
<td>冲突点在于**<code>uid</code> 二级索引**。这 100 个请求需要修改 <code>uid</code> 索引上同一个 <code>uid</code> 值对应的物理页。</td>
<td></td>
</tr>
<tr>
<td><strong>冲突化解</strong></td>
<td>1. <strong>隔离性好</strong>：该 <code>uid</code> 的索引页竞争，不会影响其他 <code>uid</code> 在其他索引页上的操作。<br>2. <strong>处理者强大</strong>：竞争由<strong>整个数据库实例</strong>的全局资源（Buffer Pool、多核CPU、I/O子系统）来化解。这个“现代化大工厂”能轻松吸收单个热点带来的冲击，将其视为众多任务中普通的一个。<br>3. <strong>性能冗余</strong>：100 TPS 的热点压力，对于一个能处理数千 TPS 的实例来说，只占极小部分。</td>
<td><strong>竞争被有效隔离和吸收，系统鲁棒性极强。</strong></td>
</tr>
</tbody>
</table>
<h3 id="危险的反模式uid-分库--uid-hash-分表">危险的反模式：<code>UID 分库 + UID Hash 分表</code></h3>
<ul>
<li><strong>工作方式</strong>：<code>库 = f(uid)</code>, <code>表 = g(uid)</code>。一个用户的所有订单落到固定的单库单表。</li>
<li><strong>致命缺陷</strong>：<strong>微观热点导致系统雪崩</strong>。当一个热点用户并发写入时，所有请求都会竞争<strong>同一张表</strong>的<strong>同一个 <code>uid</code> 二级索引页</strong>。这个“表级小作坊”的刚性瓶颈会迅速饱和，并可能拖慢整个实例，应极力避免。</li>
</ul>
<hr>
<h2 id="b-端架构拥抱数据倾斜赋能商业分析">B 端架构：拥抱数据倾斜，赋能商业分析</h2>
<p>B 端设计的核心是承认“超级卖家”的存在，并为他们提供强大的、隔离的、可分析的数据服务。任何单一方案都难以应对，必须采用多层防御体系。</p>
<h3 id="黄金组合mysql-实时库--olap-分析库">黄金组合：<code>MySQL 实时库 + OLAP 分析库</code></h3>
<p>这是 B 端架构的基石，旨在将<strong>实时操作</strong>与<strong>复杂分析</strong>彻底分离。</p>
<ol>
<li>
<p><strong>MySQL 实时库 (Seller-Shard)</strong></p>
<ul>
<li><strong>定位</strong>：B 端<strong>操作指令中心</strong>。负责处理需要<strong>事务</strong>的实时操作（接单、退款、核销）和近期的简单流水查询。</li>
<li><strong>架构</strong>：按 <code>sellerId % N</code> 分库。数据从 C 端实时同步而来。</li>
</ul>
</li>
<li>
<p><strong>OLAP 分析库 (ClickHouse / Doris)</strong></p>
<ul>
<li><strong>定位</strong>：B 端<strong>数据大脑</strong>。负责处理所有复杂、耗时、多维度的聚合查询和报表分析。</li>
<li><strong>架构</strong>：以 <code>sellerId</code> + <code>时间</code> 作为分区键，同样从 C 端同步数据。</li>
</ul>
</li>
</ol>
<h3 id="核心难题如何优雅地处理超级卖家">核心难题：如何优雅地处理“超级卖家”？</h3>
<p>即使有了 <code>Seller-Shard</code> 集群，一个超级卖家的流量也足以压垮他所在的共享分片。对此，核心思想是：<strong>识别、隔离、专享</strong>。</p>
<h4 id="终极方案物理隔离建立专属数据库">终极方案：物理隔离，建立“专属数据库”</h4>
<p>这是最彻底的方案。当一个商户成长为超级卖家后，我们为他提供一个（或一组）专属的物理数据库服务器。</p>
<ol>
<li>
<p><strong>如何实现？</strong></p>
<ul>
<li><strong>动态路由</strong>：在应用层或中间件维护一个“超级卖家名单”。路由规则变为：若 <code>sellerId</code> 在名单内，则连接其专属数据库；否则，走普通的分片逻辑。</li>
<li><strong>平滑迁移</strong>：通过“识别监控 -&gt; 部署新库 -&gt; CDC工具同步数据 -&gt; 数据校验 -&gt; 低峰期切换路由”的标准流程，可以做到对商户无感的在线迁移。</li>
</ul>
</li>
<li>
<p><strong>优点</strong>：</p>
<ul>
<li><strong>完全的性能隔离</strong>：超级卖家大促、导出数据等任何操作，绝对不会影响其他商户。</li>
<li><strong>极致的可扩展性</strong>：可独立为该卖家升级服务器，甚至扩展成一主多从的小集群。</li>
</ul>
</li>
</ol>
<h4 id="专属库内部的分表策略回归时间">专属库内部的分表策略：回归时间</h4>
<p>为超级卖家的专属数据库分表，<strong>绝对不能</strong>使用<code>OrderID Hash分表</code>，因为它会破坏B端最核心的按时间范围查询。</p>
<p><strong>正确姿势：<code>专属物理库 + 按月/季度分表</code></strong></p>
<ul>
<li><strong>工作方式</strong>：在专属库内，创建 <code>orders_202407</code>, <code>orders_202408</code> 等月表。</li>
<li><strong>核心优势</strong>：
<ul>
<li><strong>查询高效</strong>：所有按时间范围的查询（查今天、上个月）都能精确路由到少数几张表。</li>
<li><strong>归档简单</strong>：对过期的冷数据表，可直接备份后 <code>DROP TABLE</code>，秒级释放空间。</li>
<li><strong>单表可控</strong>：日均百万单的卖家，月表在3000万行，性能完全可控。</li>
</ul>
</li>
</ul>
<h3 id="b端架构的多层防御体系总结">B端架构的多层防御体系总结</h3>
<p>一个健壮的B端架构，应该是这样的多层防御体系：</p>
<ul>
<li><strong>分析层 (OLAP)</strong>：ClickHouse/Doris处理所有复杂报表与多维分析。</li>
<li><strong>专属层 (VIP)</strong>：为头部1%的超级卖家提供物理隔离的<strong>专属数据库</strong>，内部<strong>按时间分表</strong>。</li>
<li><strong>优化层 (通用)</strong>：在所有分片上实施<strong>读写分离</strong>和<strong>异步任务队列</strong>，分离实时操作和耗时查询。</li>
<li><strong>基础层 (共享)</strong>：为99%的中小商户提供按<code>sellerId</code>分片的共享集群。</li>
</ul>
<hr>
<h2 id="演进路线与总结">演进路线与总结</h2>
<ol>
<li><strong>初期 (0-500万单/日)</strong>：C 端采用 <code>UID 分库 + 月分表</code>。B 端可以先共用 C 端库，通过视图或简单冗余满足需求。</li>
<li><strong>中期 (500万-5000万单/日)</strong>：C 端架构保持。B 端必须独立，上线 <code>Seller-Shard MySQL</code> 集群，并开始为头部商户规划专属库。</li>
<li><strong>成熟期 (亿级)</strong>：C 端架构稳定运行。B 端必须上线 <code>OLAP</code> 分析库，形成 <code>MySQL + OLAP</code> 的组合架构，并常态化运营超级卖家的识别与迁移。</li>
</ol>
<blockquote>
<p><strong>最终结论</strong>：成功的海量数据架构，源于对业务场景的深刻洞察。放弃“一套通用方案”的幻想，为 C 端构建稳定可靠的并发长城，为 B 端打造灵活强大的分层防御体系，并让它们通过异步化解耦、协同工作——这才是通往亿级订单系统的正确道路。</p>
</blockquote>

                    
                    <HR width="100%" id="EOF">
		    <p style="color:#777;">最后修改于 2025-07-29</p>
                    
                </div>
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts" href="/posts/misc/scalper-economy/">
			下回<br>茅台、五粮液、剑南春、拉布布、大疆 等黄牛模式分析
                </a>
                
                
                
                <a class="older-posts" href="/posts/architect/misc/seckill-stock-multi-dc/">
			上回<br>异地多活数据中心秒杀库存问题深度解析：从超卖到一致性
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                


<div id="gitalk-container"></div>











            </div>
        </div>
    </div>


                    </div>
            </div><div id="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="https://terryren.github.io/">
    
        <div class="nav-title">
            The Sound of Music
        </div>
        
        <div class="nav-subtitle">
            知行合一
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
            
            
                
            
            
            
            <a class="a-block nav-link-item active" href="/posts">
                博客
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/categories">
                分类
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/tags">
                标签
            </a>
            
        
            
            
            
            
            
            <a class="a-block nav-link-item false" href="/index.xml">
                订阅
            </a>
            
        
    </div>

    

    <div class="nav-footer">
        
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://risehere.net/">Rise</a>
<br>
移植自 <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	Terry
	

    </div>
    
</div><div id="extraContainer" class="extra-container">
    <div class="toc-wrapper">
        

        
        <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- 目录 -</center>
		
		
		<ul>
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e6%a0%b8%e5%bf%83%e5%8e%9f%e5%88%99c-%e7%ab%af%e4%b8%8e-b-%e7%ab%af%e5%bf%85%e9%a1%bb%e5%88%86%e8%80%8c%e6%b2%bb%e4%b9%8b" class="nav-核心原则c-端与-b-端必须分而治之">
									核心原则：C 端与 B 端，必须“分而治之”
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#c-%e7%ab%af%e6%9e%b6%e6%9e%84%e8%bf%bd%e6%b1%82%e6%9e%81%e8%87%b4%e7%9a%84%e5%b9%b6%e5%8f%91%e4%b8%8e%e7%a8%b3%e5%ae%9a%e7%9a%84%e4%bd%93%e9%aa%8c" class="nav-c-端架构追求极致的并发与稳定的体验">
									C 端架构：追求极致的并发与稳定的体验
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5uid-%e5%88%86%e5%ba%93--hothistory-%e8%a1%a8-%e6%88%96-%e6%9c%88%e5%88%86%e8%a1%a8" class="nav-最佳实践uid-分库--hothistory-表-或-月分表">
									最佳实践：UID 分库 &#43; hot/history 表 (或 月分表)
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e6%b7%b1%e5%ba%a6%e8%a7%a3%e6%9e%90%e4%b8%ba%e4%bd%95%e5%ae%83%e8%83%bd%e5%ba%94%e5%af%b9%e6%9e%81%e9%99%90%e5%b9%b6%e5%8f%91" class="nav-深度解析为何它能应对极限并发">
									深度解析：为何它能应对极限并发？
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e5%8d%b1%e9%99%a9%e7%9a%84%e5%8f%8d%e6%a8%a1%e5%bc%8fuid-%e5%88%86%e5%ba%93--uid-hash-%e5%88%86%e8%a1%a8" class="nav-危险的反模式uid-分库--uid-hash-分表">
									危险的反模式：UID 分库 &#43; UID Hash 分表
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#b-%e7%ab%af%e6%9e%b6%e6%9e%84%e6%8b%a5%e6%8a%b1%e6%95%b0%e6%8d%ae%e5%80%be%e6%96%9c%e8%b5%8b%e8%83%bd%e5%95%86%e4%b8%9a%e5%88%86%e6%9e%90" class="nav-b-端架构拥抱数据倾斜赋能商业分析">
									B 端架构：拥抱数据倾斜，赋能商业分析
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e9%bb%84%e9%87%91%e7%bb%84%e5%90%88mysql-%e5%ae%9e%e6%97%b6%e5%ba%93--olap-%e5%88%86%e6%9e%90%e5%ba%93" class="nav-黄金组合mysql-实时库--olap-分析库">
									黄金组合：MySQL 实时库 &#43; OLAP 分析库
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e6%a0%b8%e5%bf%83%e9%9a%be%e9%a2%98%e5%a6%82%e4%bd%95%e4%bc%98%e9%9b%85%e5%9c%b0%e5%a4%84%e7%90%86%e8%b6%85%e7%ba%a7%e5%8d%96%e5%ae%b6" class="nav-核心难题如何优雅地处理超级卖家">
									核心难题：如何优雅地处理“超级卖家”？
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
							
								
									<ul>
								
							
						
						
							<li>
								<a href="#%e7%bb%88%e6%9e%81%e6%96%b9%e6%a1%88%e7%89%a9%e7%90%86%e9%9a%94%e7%a6%bb%e5%bb%ba%e7%ab%8b%e4%b8%93%e5%b1%9e%e6%95%b0%e6%8d%ae%e5%ba%93" class="nav-终极方案物理隔离建立专属数据库">
									终极方案：物理隔离，建立“专属数据库”
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
						
						
							<li>
								<a href="#%e4%b8%93%e5%b1%9e%e5%ba%93%e5%86%85%e9%83%a8%e7%9a%84%e5%88%86%e8%a1%a8%e7%ad%96%e7%95%a5%e5%9b%9e%e5%bd%92%e6%97%b6%e9%97%b4" class="nav-专属库内部的分表策略回归时间">
									专属库内部的分表策略：回归时间
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#b%e7%ab%af%e6%9e%b6%e6%9e%84%e7%9a%84%e5%a4%9a%e5%b1%82%e9%98%b2%e5%be%a1%e4%bd%93%e7%b3%bb%e6%80%bb%e7%bb%93" class="nav-b端架构的多层防御体系总结">
									B端架构的多层防御体系总结
								</a>
							</li>
						
						
					
				
			
				
				
					
						
						
						
							
								</ul>
							
						
						
						
							<li>
								<a href="#%e6%bc%94%e8%bf%9b%e8%b7%af%e7%ba%bf%e4%b8%8e%e6%80%bb%e7%bb%93" class="nav-演进路线与总结">
									演进路线与总结
								</a>
							</li>
						
						
					
				
			
		</ul>
	</div>

</div>
        
    </div>
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top"
            :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
        <a type="button" class="pagination-action" id="darkModeToggleButton">
            <span class="material-icons pagination-action-icon" id="darkModeToggleIcon">
                dark_mode
            </span>
        </a>
        
        
    </div>
</div>

<div id="single-column-footer">
Hugo Theme <a href="https://github.com/amazingrise/hugo-theme-diary">Diary</a> by <a href="https://risehere.net/">Rise</a>
<br>
移植自 <a href="https://mak1t0.cc/" target="_blank" rel="noreferrer noopener">Makito</a>'s <a href="https://github.com/SumiMakito/hexo-theme-journal/" target="_blank" rel="noreferrer noopener">Journal.</a> <br>
<br>

&copy;
	
	Terry
	
</div>
            </div>
    
    <script src="/js/journal.js"></script></body>
</html>
